"use client"
import { IconButton, Menu, MenuButton, MenuItem, MenuList, Text, Tooltip } from "@chakra-ui/react"
import { useRouter } from "next/navigation";
 
import { HiOutlineDotsHorizontal } from "react-icons/hi"

const ThreeDotsDropDownMenu = ({from,signUpButtonRef,onOpen}) => {
    
    const router = useRouter();
    const postOptions = [
      { label: "AI Summarize", path: "M18.332 11.042l-4.05-7.056A4.875 4.875 0 009.92 1.5a4.898 4.898 0 00-4.198 2.485l-4.05 7.056a4.938 4.938 0 00.042 5.044 4.894 4.894 0 004.238 2.414h8.099c1.82 0 3.437-.957 4.32-2.559a4.956 4.956 0 00-.04-4.9v.002zM9.948 3.306a3.107 3.107 0 012.78 1.583l1.325 2.308c.5.871.697 1.203 1.002 1.559l-.066.093c-.455-.184-1.201-.212-1.885-.082-.757.144-1.38.48-1.48.538a3.229 3.229 0 01-3.241.005A3.272 3.272 0 016.93 7.536c-.428-1.218.012-2.562.96-3.417a3.107 3.107 0 012.058-.813h-.001zM3.253 15.158a3.142 3.142 0 01-.027-3.213L4.55 9.637c.499-.872.687-1.209.84-1.653l.114.011c.069.488.418 1.153.872 1.684a5.283 5.283 0 001.203 1.02 3.27 3.27 0 01.824 4.973c-.834.981-2.212 1.27-3.421.872a3.126 3.126 0 01-1.73-1.386zm13.55-.094a3.105 3.105 0 01-2.751 1.63h-2.65c-1 0-1.383.006-1.842.093l-.047-.104c.386-.305.783-.94 1.013-1.601a5.342 5.342 0 00.277-1.558 3.27 3.27 0 011.616-2.826 3.235 3.235 0 012.253-.378c1.262.236 2.2 1.292 2.46 2.545.16.737.05 1.513-.328 2.199z"},
        { label: "Follow post", path: "M18.176 14.218l-.925-1.929a2.577 2.577 0 01-.25-1.105V8c0-3.86-3.142-7-7-7-3.86 0-7 3.14-7 7v3.184c0 .38-.088.762-.252 1.105l-.927 1.932A1.103 1.103 0 002.82 15.8h3.26A4.007 4.007 0 0010 19a4.008 4.008 0 003.918-3.2h3.26a1.1 1.1 0 00.934-.514 1.1 1.1 0 00.062-1.068h.002zM10 17.2c-.93 0-1.722-.583-2.043-1.4h4.087a2.197 2.197 0 01-2.043 1.4zM3.925 14l.447-.933c.28-.584.43-1.235.43-1.883V8c0-2.867 2.331-5.2 5.198-5.2A5.205 5.205 0 0115.2 8v3.184c0 .648.147 1.299.428 1.883l.447.933H3.925z" },
        { label: "Show fewer posts like this", path:"M3.497 3.503a.9.9 0 10-1.273 1.273l.909.909A10.141 10.141 0 00.92 8.472a3.225 3.225 0 000 3.058A10.296 10.296 0 0010 16.973a10.13 10.13 0 003.709-.712l1.457 1.457a.897.897 0 001.274 0 .9.9 0 000-1.273L3.497 3.503zM10 15.172a8.497 8.497 0 01-7.495-4.494 1.448 1.448 0 010-1.354 8.436 8.436 0 011.9-2.365l2.069 2.068c-.062.271-.105.55-.105.84a3.77 3.77 0 003.767 3.767c.29 0 .569-.043.84-.106l1.31 1.31a8.284 8.284 0 01-2.284.335L10 15.172zm.476-7.237L8.874 6.333a3.722 3.722 0 011.26-.233 3.77 3.77 0 013.767 3.767c0 .444-.091.864-.233 1.26l-1.603-1.603a1.963 1.963 0 00-1.59-1.589zm8.605 3.595a10.297 10.297 0 01-2.22 2.792L15.59 13.05a8.512 8.512 0 001.905-2.372 1.448 1.448 0 000-1.354A8.496 8.496 0 007.69 5.15L6.282 3.742A10.249 10.249 0 0110 3.028c3.8 0 7.28 2.087 9.08 5.444a3.225 3.225 0 010 3.058z"},
        { label: "Save", path:"M13.6 3.8c.882 0 1.6.718 1.6 1.6v11.166l-5.201-2.911L4.8 16.566V5.4a1.6 1.6 0 011.6-1.6h7.2zm0-1.8H6.4A3.4 3.4 0 003 5.4v12.24c0 .682.56 1.172 1.172 1.172.19 0 .385-.047.57-.151L10 15.717l5.259 2.944a1.167 1.167 0 001.742-1.021V5.4A3.4 3.4 0 0013.6 2z"},
        { label: "Hide",  path:"M3.497 3.503a.9.9 0 10-1.273 1.273l.909.909A10.141 10.141 0 00.92 8.472a3.225 3.225 0 000 3.058A10.296 10.296 0 0010 16.973a10.13 10.13 0 003.709-.712l1.457 1.457a.897.897 0 001.274 0 .9.9 0 000-1.273L3.497 3.503zM10 15.172a8.497 8.497 0 01-7.495-4.494 1.448 1.448 0 010-1.354 8.436 8.436 0 011.9-2.365l2.069 2.068c-.062.271-.105.55-.105.84a3.77 3.77 0 003.767 3.767c.29 0 .569-.043.84-.106l1.31 1.31a8.284 8.284 0 01-2.284.335L10 15.172zm.476-7.237L8.874 6.333a3.722 3.722 0 011.26-.233 3.77 3.77 0 013.767 3.767c0 .444-.091.864-.233 1.26l-1.603-1.603a1.963 1.963 0 00-1.59-1.589zm8.605 3.595a10.297 10.297 0 01-2.22 2.792L15.59 13.05a8.512 8.512 0 001.905-2.372 1.448 1.448 0 000-1.354A8.496 8.496 0 007.69 5.15L6.282 3.742A10.249 10.249 0 0110 3.028c3.8 0 7.28 2.087 9.08 5.444a3.225 3.225 0 010 3.058z"},
        { label: "Report", path: "M15.21 7.5l2.56-3.86c.47-.7-.04-1.64-.88-1.64H5C3.03 2 1.59 3.87 2.1 5.78L4.04 13l1.37 5.08a.906.906 0 001.1.64.9.9 0 00.64-1.1l-1.24-4.61h10.98c.84 0 1.35-.94.88-1.64l-2.56-3.86V7.5zm-9.79 3.7L3.84 5.31c-.13-.5.07-.87.21-1.04.13-.18.44-.47.95-.47h10.5l-2.45 3.7 2.45 3.7H5.42z"},
    ];
 
    const menuOptions = [
      {label:"Log In / Sign Up", path:"M13.701 1H6.298a3.299 3.299 0 00-3.299 3.299v8.402A3.299 3.299 0 006.298 16h.701v.858a2.26 2.26 0 002.255 2.259c.293 0 .594-.058.889-.184l5.487-2.347a2.257 2.257 0 001.369-2.075V4.299A3.298 3.298 0 0013.701 1zM7 6.767V14.2h-.701A1.5 1.5 0 014.8 12.701V4.299A1.5 1.5 0 016.299 2.8h6.494L8.37 4.692A2.257 2.257 0 007 6.767zm8.2 7.744a.457.457 0 01-.277.42l-5.487 2.347a.461.461 0 01-.181.039.46.46 0 01-.455-.459V6.767c0-.183.109-.348.277-.42L14.564 4a.461.461 0 01.181-.039.46.46 0 01.455.459v10.091zM10.3 9.7h1.8v2.585h-1.8V9.7z"},
      {label:"Advertise on Reddit", path:"M12.83 5.897l2.261-2.261a.9.9 0 111.273 1.273l-2.266 2.266a5.034 5.034 0 00-1.268-1.278zM10 5c.309 0 .608.038.9.092V1.9a.9.9 0 00-1.8 0v3.19c.293-.053.592-.09.9-.09zm-5 5c0-.308.037-.607.091-.9H1.9a.9.9 0 000 1.8h3.191A4.94 4.94 0 015 10zm.889-2.838a5.017 5.017 0 011.273-1.273L4.909 3.636a.9.9 0 10-1.273 1.273l2.253 2.253zm-2.253 7.929a.9.9 0 101.274 1.273l2.266-2.266a5.038 5.038 0 01-1.278-1.269l-2.262 2.262zm15.253 3.797a2.696 2.696 0 000-3.804l-1.367-1.366.655-.367a1.621 1.621 0 00-.308-2.959L9.927 7.894a1.617 1.617 0 00-1.633.4 1.616 1.616 0 00-.4 1.633l2.498 7.941a1.62 1.62 0 002.96.308l.367-.654 1.366 1.367a2.684 2.684 0 001.901.785c.688 0 1.379-.262 1.903-.786zM9.713 9.714l7.22 2.271-2.366 1.326 3.048 3.046a.89.89 0 01-1.258 1.259l-3.048-3.048-1.326 2.366-2.27-7.22z"},
      {label:"Try Reddit Pro", path:"M10 1c-.5 0-.9.4-.9.9v.17C5.11 2.52 2 5.9 2 10c0 4.41 3.59 8 8 8 4.11 0 7.48-3.11 7.93-7.1h.17c.5 0 .9-.4.9-.9 0-4.96-4.04-9-9-9zm.9 1.86c3.25.41 5.84 2.99 6.24 6.24H10.9V2.86zM10 16.2c-3.42 0-6.2-2.78-6.2-6.2 0-3.11 2.31-5.69 5.3-6.12V10c0 .5.4.9.9.9h6.12c-.44 2.99-3.01 5.3-6.12 5.3z"},
    ];

  const handleClickMenuOptions= (label) => {
    console.log(label)
     if(label==="Log In / Sign Up") signUpButtonRef.current.click();
     else if(label==="Advertise on Reddit") router.push("/AdvertiseonReddit");
     else router.push("/TryRedditPro")
  }

  const handleClickPostOptions = (label) => {
     if(label === "AI Summarize") onOpen();
  }


  return (
    <Menu placement={from==="Header"? "auto" : "bottom-end"} >
        <Tooltip hasArrow label={"Open setting menu"} bg={"white"} color={"black"} padding={"7px"} fontSize={13} display={from==="Header"?"block":"none"}>
        <MenuButton as={IconButton} icon={<HiOutlineDotsHorizontal size={from==="Header"?21:14}/>} minW={0}  width={from==="Header"?"40px":"30px"} height={from==="Header"?"40px":"30px"} justifyContent={"center"} alignItems={"center"} color={from==="Header"?"white":"#6e848dff"} cursor={"pointer"} _hover={{bgColor:"#323D41",color:"white"}} _active={{bgColor:"transparent"}} bgColor={"transparent"} borderRadius={"50%"}/>
       </Tooltip>
        <MenuList bgColor={"#181C1F"} color={"#ccc"} border={"none"} minWidth={"fit-content"} p={from==="Header"?3:2}>
            {(from==="Header"? menuOptions : postOptions).map(e=>(
            <MenuItem key={e.label} bgColor={"#181C1F"} minWidth={from==="Header"?"250px":"fit-content"} height={"40px"} justifyContent={"flex-start"} alignItems={"center"} _hover={{color:"white"}} gap={4} mb={from==="Header"?2:0} onClick={() => {from === "Header" ? handleClickMenuOptions(e.label) : handleClickPostOptions(e.label);}}>
              <svg rpl="" fill="currentColor" height="20" icon-name="notifications" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d={e.path}></path></svg>
               <p>{e.label}</p>
               <Text color= {"#d1450eff"} fontSize={12} ml={-1} fontWeight={"semibold"} display={from==="Header" && e.label==="Try Reddit Pro"?"block":"none"} > BETA</Text>
             </MenuItem>
            ))}
        </MenuList>
    </Menu> 
  )
}

export default ThreeDotsDropDownMenu;